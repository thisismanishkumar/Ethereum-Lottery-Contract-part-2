{"version":3,"sources":["web3.js","lottery.js","App.js","index.js"],"names":["web3","Web3","window","currentProvider","eth","Contract","constant","inputs","name","outputs","type","payable","stateMutability","App","state","manager","players","balance","value","message","onSubmit","event","a","async","preventDefault","getAccounts","accounts","setState","lottery","methods","enter","send","from","utils","toWei","call","getPlayers","getBalance","options","address","onClick","pickWinner","this","addEventListener","ethereum","enable","console","log","length","fromWei","onChange","target","Component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.dd74ab9f.chunk.js","sourcesContent":["import Web3 from 'web3';\n\nconst web3=new Web3(window.web3.currentProvider);\nexport default web3;","import web3 from \"./web3\";\n\nconst address = \"0xD94330B373b741317AD28A0f3825935e3b8465E9\";\n\nconst abi = [\n  {\n    constant: true,\n    inputs: [],\n    name: \"manager\",\n    outputs: [{ name: \"\", type: \"address\" }],\n    payable: false,\n    stateMutability: \"view\",\n    type: \"function\"\n  },\n  {\n    constant: false,\n    inputs: [],\n    name: \"pickWinner\",\n    outputs: [],\n    payable: false,\n    stateMutability: \"nonpayable\",\n    type: \"function\"\n  },\n  {\n    constant: true,\n    inputs: [],\n    name: \"getPlayers\",\n    outputs: [{ name: \"\", type: \"address[]\" }],\n    payable: false,\n    stateMutability: \"view\",\n    type: \"function\"\n  },\n  {\n    constant: false,\n    inputs: [],\n    name: \"enter\",\n    outputs: [],\n    payable: true,\n    stateMutability: \"payable\",\n    type: \"function\"\n  },\n  {\n    constant: true,\n    inputs: [{ name: \"\", type: \"uint256\" }],\n    name: \"players\",\n    outputs: [{ name: \"\", type: \"address\" }],\n    payable: false,\n    stateMutability: \"view\",\n    type: \"function\"\n  },\n  {\n    inputs: [],\n    payable: false,\n    stateMutability: \"nonpayable\",\n    type: \"constructor\"\n  }\n];\n\nexport default new web3.eth.Contract(abi,address);\n","import React, { Component } from \"react\";\nimport \"./App.css\";\nimport Web3 from \"./web3\";\nimport lottery from \"./lottery\";\nimport web3 from \"./web3\";\n\nclass App extends Component {\n  // constructor(props){\n  //   super(props);\n  //   this.state = {manager: ''};\n  // }\n\n  //ES6\n  state = {\n    manager: \"\",\n    players: [],\n    balance: \"\",\n    value: \"\",\n    message: \"Waiting for user to enter in the lottery\"\n  };\n  async componentDidMount() {\n    const manager = await lottery.methods.manager().call();\n    const players = await lottery.methods.getPlayers().call();\n    const balance = await web3.eth.getBalance(lottery.options.address);\n    this.setState({ manager: manager, players: players, balance: balance });\n  }\n  onSubmit = async event => {\n    event.preventDefault();\n    const accounts = await web3.eth.getAccounts();\n    this.setState({ message: \"Waiting on transaction sucess ....\" });\n    await lottery.methods.enter().send({\n      from: accounts[0],\n      value: web3.utils.toWei(this.state.value, \"ether\")\n    });\n    const manager = await lottery.methods.manager().call();\n    const players = await lottery.methods.getPlayers().call();\n    const balance = await web3.eth.getBalance(lottery.options.address);\n    this.setState({\n      manager: manager,\n      players: players,\n      balance: balance,\n      message: \"Congratulation!!! You have successfully entered the lottery\"\n    });\n  };\n  onClick = async (event) =>{\n    this.setState({message:'Waiting on picking winner!!!'})\n    const accounts = await web3.eth.getAccounts();\n    await lottery.methods.pickWinner().send({\n      from: accounts[0]\n    });\n    this.setState({message: 'A winner has been picked!'});\n  };\n\nrender() \n{\n    // let web3;\n// web3 from metamask\n  window.addEventListener('load',async ()=>{\n    if(window.ethereum){\n      // window.web3=new Web3(window.ethereum);\n      try{\n        await window.ethereum.enable();\n      }\n      catch(err){\n        console.log(err);\n      }\n  }\n  });\n    return (\n      <div>\n        <h1>Lottery Contract</h1>\n        <p>\n          This contract is managed by {this.state.manager} . &nbsp; There are\n          currently {this.state.players.length} people competing to win{\" \"}\n          {web3.utils.fromWei(this.state.balance, \"ether\")} Ether !!!\n        </p>\n        <hr />\n        <form onSubmit={this.onSubmit}>\n          <h4> Want to try your Luck ???</h4>\n          <div>\n            <label>Amount of ether to Enter &nbsp;</label>\n            <input\n              value={this.state.value}\n              onChange={event => this.setState({ value: event.target.value })}\n            ></input>\n          </div>\n          <button>Enter</button>\n        </form>\n\n        <hr />\n        <h3>Ready to pick up a Winner ??</h3>\n        <button onClick={this.onClick}>Pick a Winner</button>\n        <hr />\n        <h2> Status:- {this.state.message}</h2>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}